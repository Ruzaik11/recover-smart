Watching for file changes with StatReloader
D:\Fanshawe\capstone\recover_smart\recoversmart\settings.py changed, reloading.
Watching for file changes with StatReloader
Bad Request: /api/patients/
"POST //api/patients/ HTTP/1.1" 400 58
"POST //api/patients/ HTTP/1.1" 201 155
D:\Fanshawe\capstone\recover_smart\users\views.py changed, reloading.
Watching for file changes with StatReloader
Bad Request: /api/patients/
"POST //api/patients/ HTTP/1.1" 400 58
"POST //api/patients/ HTTP/1.1" 201 155
D:\Fanshawe\capstone\recover_smart\users\views.py changed, reloading.
Watching for file changes with StatReloader
D:\Fanshawe\capstone\recover_smart\users\views.py changed, reloading.
Watching for file changes with StatReloader
Bad Request: /api/patients/
"POST //api/patients/ HTTP/1.1" 400 58
"POST //api/users HTTP/1.1" 201 121
D:\Fanshawe\capstone\recover_smart\users\views.py changed, reloading.
Watching for file changes with StatReloader
D:\Fanshawe\capstone\recover_smart\users\views.py changed, reloading.
Watching for file changes with StatReloader
D:\Fanshawe\capstone\recover_smart\users\views.py changed, reloading.
Watching for file changes with StatReloader
Bad Request: /api/users
"POST //api/users HTTP/1.1" 400 58
D:\Fanshawe\capstone\recover_smart\users\views.py changed, reloading.
Watching for file changes with StatReloader
Internal Server Error: /api/users
Traceback (most recent call last):
  File "D:\Fanshawe\capstone\recover_smart\venv\Lib\site-packages\django\core\handlers\exception.py", line 55, in inner
    response = get_response(request)
  File "D:\Fanshawe\capstone\recover_smart\venv\Lib\site-packages\django\core\handlers\base.py", line 197, in _get_response
    response = wrapped_callback(request, *callback_args, **callback_kwargs)
  File "D:\Fanshawe\capstone\recover_smart\venv\Lib\site-packages\django\views\decorators\csrf.py", line 65, in _view_wrapper
    return view_func(request, *args, **kwargs)
  File "D:\Fanshawe\capstone\recover_smart\venv\Lib\site-packages\django\views\generic\base.py", line 104, in view
    return self.dispatch(request, *args, **kwargs)
           ~~~~~~~~~~~~~^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "D:\Fanshawe\capstone\recover_smart\venv\Lib\site-packages\rest_framework\views.py", line 509, in dispatch
    response = self.handle_exception(exc)
  File "D:\Fanshawe\capstone\recover_smart\venv\Lib\site-packages\rest_framework\views.py", line 469, in handle_exception
    self.raise_uncaught_exception(exc)
    ~~~~~~~~~~~~~~~~~~~~~~~~~~~~~^^^^^
  File "D:\Fanshawe\capstone\recover_smart\venv\Lib\site-packages\rest_framework\views.py", line 480, in raise_uncaught_exception
    raise exc
  File "D:\Fanshawe\capstone\recover_smart\venv\Lib\site-packages\rest_framework\views.py", line 506, in dispatch
    response = handler(request, *args, **kwargs)
  File "D:\Fanshawe\capstone\recover_smart\users\views.py", line 78, in post
    create_user_and_send_email(context = {
    ~~~~~~~~~~~~~~~~~~~~~~~~~~^^^^^^^^^^^^
        "first_name": user.first_name,
        ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
        "username": user.username,
        ^^^^^^^^^^^^^^^^^^^^^^^^^^
        "password": password
        ^^^^^^^^^^^^^^^^^^^^
    })
    ^^
TypeError: create_user_and_send_email() got an unexpected keyword argument 'context'
"POST //api/users HTTP/1.1" 500 108450
D:\Fanshawe\capstone\recover_smart\users\services.py changed, reloading.
Watching for file changes with StatReloader
D:\Fanshawe\capstone\recover_smart\users\services.py changed, reloading.
Watching for file changes with StatReloader
D:\Fanshawe\capstone\recover_smart\users\services.py changed, reloading.
Watching for file changes with StatReloader
D:\Fanshawe\capstone\recover_smart\users\services.py changed, reloading.
Watching for file changes with StatReloader
D:\Fanshawe\capstone\recover_smart\users\views.py changed, reloading.
Watching for file changes with StatReloader
D:\Fanshawe\capstone\recover_smart\users\views.py changed, reloading.
Watching for file changes with StatReloader
Bad Request: /api/users
"POST //api/users HTTP/1.1" 400 58
"POST //api/users HTTP/1.1" 201 123
D:\Fanshawe\capstone\recover_smart\users\services.py changed, reloading.
Watching for file changes with StatReloader
D:\Fanshawe\capstone\recover_smart\patients\views.py changed, reloading.
Watching for file changes with StatReloader
D:\Fanshawe\capstone\recover_smart\patients\views.py changed, reloading.
Watching for file changes with StatReloader
D:\Fanshawe\capstone\recover_smart\patients\views.py changed, reloading.
Watching for file changes with StatReloader
D:\Fanshawe\capstone\recover_smart\users\views.py changed, reloading.
Watching for file changes with StatReloader
D:\Fanshawe\capstone\recover_smart\users\views.py changed, reloading.
Watching for file changes with StatReloader
D:\Fanshawe\capstone\recover_smart\patients\views.py changed, reloading.
Watching for file changes with StatReloader
Internal Server Error: /api/patients/
Traceback (most recent call last):
  File "D:\Fanshawe\capstone\recover_smart\users\services.py", line 13, in create_user_and_send_email
    user.set_password(password)  # Securely set the password
    ^^^^^^^^^^^^^^^^^
AttributeError: 'UserSerializer' object has no attribute 'set_password'

During handling of the above exception, another exception occurred:

Traceback (most recent call last):
  File "D:\Fanshawe\capstone\recover_smart\venv\Lib\site-packages\django\core\handlers\exception.py", line 55, in inner
    response = get_response(request)
  File "D:\Fanshawe\capstone\recover_smart\venv\Lib\site-packages\django\core\handlers\base.py", line 197, in _get_response
    response = wrapped_callback(request, *callback_args, **callback_kwargs)
  File "D:\Fanshawe\capstone\recover_smart\venv\Lib\site-packages\django\views\decorators\csrf.py", line 65, in _view_wrapper
    return view_func(request, *args, **kwargs)
  File "D:\Fanshawe\capstone\recover_smart\venv\Lib\site-packages\django\views\generic\base.py", line 104, in view
    return self.dispatch(request, *args, **kwargs)
           ~~~~~~~~~~~~~^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "D:\Fanshawe\capstone\recover_smart\venv\Lib\site-packages\rest_framework\views.py", line 509, in dispatch
    response = self.handle_exception(exc)
  File "D:\Fanshawe\capstone\recover_smart\venv\Lib\site-packages\rest_framework\views.py", line 469, in handle_exception
    self.raise_uncaught_exception(exc)
    ~~~~~~~~~~~~~~~~~~~~~~~~~~~~~^^^^^
  File "D:\Fanshawe\capstone\recover_smart\venv\Lib\site-packages\rest_framework\views.py", line 480, in raise_uncaught_exception
    raise exc
  File "D:\Fanshawe\capstone\recover_smart\venv\Lib\site-packages\rest_framework\views.py", line 506, in dispatch
    response = handler(request, *args, **kwargs)
  File "D:\Fanshawe\capstone\recover_smart\patients\views.py", line 93, in post
    create_user_and_send_email(user=user)
    ~~~~~~~~~~~~~~~~~~~~~~~~~~^^^^^^^^^^^
  File "D:\Fanshawe\capstone\recover_smart\users\services.py", line 29, in create_user_and_send_email
    raise ValueError(f"Error creating user: {str(e)}")
ValueError: Error creating user: 'UserSerializer' object has no attribute 'set_password'
"POST //api/patients/ HTTP/1.1" 500 119717
D:\Fanshawe\capstone\recover_smart\patients\views.py changed, reloading.
Watching for file changes with StatReloader
Bad Request: /api/patients/
"POST //api/patients/ HTTP/1.1" 400 58
Internal Server Error: /api/patients/
Traceback (most recent call last):
  File "D:\Fanshawe\capstone\recover_smart\users\services.py", line 13, in create_user_and_send_email
    user.set_password(password)  # Securely set the password
    ^^^^^^^^^^^^^^^^^
AttributeError: 'ReturnDict' object has no attribute 'set_password'

During handling of the above exception, another exception occurred:

Traceback (most recent call last):
  File "D:\Fanshawe\capstone\recover_smart\venv\Lib\site-packages\django\core\handlers\exception.py", line 55, in inner
    response = get_response(request)
  File "D:\Fanshawe\capstone\recover_smart\venv\Lib\site-packages\django\core\handlers\base.py", line 197, in _get_response
    response = wrapped_callback(request, *callback_args, **callback_kwargs)
  File "D:\Fanshawe\capstone\recover_smart\venv\Lib\site-packages\django\views\decorators\csrf.py", line 65, in _view_wrapper
    return view_func(request, *args, **kwargs)
  File "D:\Fanshawe\capstone\recover_smart\venv\Lib\site-packages\django\views\generic\base.py", line 104, in view
    return self.dispatch(request, *args, **kwargs)
           ~~~~~~~~~~~~~^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "D:\Fanshawe\capstone\recover_smart\venv\Lib\site-packages\rest_framework\views.py", line 509, in dispatch
    response = self.handle_exception(exc)
  File "D:\Fanshawe\capstone\recover_smart\venv\Lib\site-packages\rest_framework\views.py", line 469, in handle_exception
    self.raise_uncaught_exception(exc)
    ~~~~~~~~~~~~~~~~~~~~~~~~~~~~~^^^^^
  File "D:\Fanshawe\capstone\recover_smart\venv\Lib\site-packages\rest_framework\views.py", line 480, in raise_uncaught_exception
    raise exc
  File "D:\Fanshawe\capstone\recover_smart\venv\Lib\site-packages\rest_framework\views.py", line 506, in dispatch
    response = handler(request, *args, **kwargs)
  File "D:\Fanshawe\capstone\recover_smart\patients\views.py", line 93, in post
    create_user_and_send_email(user=user.data)
    ~~~~~~~~~~~~~~~~~~~~~~~~~~^^^^^^^^^^^^^^^^
  File "D:\Fanshawe\capstone\recover_smart\users\services.py", line 29, in create_user_and_send_email
    raise ValueError(f"Error creating user: {str(e)}")
ValueError: Error creating user: 'ReturnDict' object has no attribute 'set_password'
"POST //api/patients/ HTTP/1.1" 500 118411
D:\Fanshawe\capstone\recover_smart\patients\views.py changed, reloading.
Watching for file changes with StatReloader
Bad Request: /api/patients/
"POST //api/patients/ HTTP/1.1" 400 58
Internal Server Error: /api/patients/
Traceback (most recent call last):
  File "D:\Fanshawe\capstone\recover_smart\users\services.py", line 13, in create_user_and_send_email
    user.set_password(password)  # Securely set the password
    ^^^^^^^^^^^^^^^^^
AttributeError: 'UserSerializer' object has no attribute 'set_password'

During handling of the above exception, another exception occurred:

Traceback (most recent call last):
  File "D:\Fanshawe\capstone\recover_smart\venv\Lib\site-packages\django\core\handlers\exception.py", line 55, in inner
    response = get_response(request)
  File "D:\Fanshawe\capstone\recover_smart\venv\Lib\site-packages\django\core\handlers\base.py", line 197, in _get_response
    response = wrapped_callback(request, *callback_args, **callback_kwargs)
  File "D:\Fanshawe\capstone\recover_smart\venv\Lib\site-packages\django\views\decorators\csrf.py", line 65, in _view_wrapper
    return view_func(request, *args, **kwargs)
  File "D:\Fanshawe\capstone\recover_smart\venv\Lib\site-packages\django\views\generic\base.py", line 104, in view
    return self.dispatch(request, *args, **kwargs)
           ~~~~~~~~~~~~~^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "D:\Fanshawe\capstone\recover_smart\venv\Lib\site-packages\rest_framework\views.py", line 509, in dispatch
    response = self.handle_exception(exc)
  File "D:\Fanshawe\capstone\recover_smart\venv\Lib\site-packages\rest_framework\views.py", line 469, in handle_exception
    self.raise_uncaught_exception(exc)
    ~~~~~~~~~~~~~~~~~~~~~~~~~~~~~^^^^^
  File "D:\Fanshawe\capstone\recover_smart\venv\Lib\site-packages\rest_framework\views.py", line 480, in raise_uncaught_exception
    raise exc
  File "D:\Fanshawe\capstone\recover_smart\venv\Lib\site-packages\rest_framework\views.py", line 506, in dispatch
    response = handler(request, *args, **kwargs)
  File "D:\Fanshawe\capstone\recover_smart\patients\views.py", line 93, in post
    create_user_and_send_email(user=user)
    ~~~~~~~~~~~~~~~~~~~~~~~~~~^^^^^^^^^^^
  File "D:\Fanshawe\capstone\recover_smart\users\services.py", line 29, in create_user_and_send_email
    raise ValueError(f"Error creating user: {str(e)}")
ValueError: Error creating user: 'UserSerializer' object has no attribute 'set_password'
"POST //api/patients/ HTTP/1.1" 500 119741
D:\Fanshawe\capstone\recover_smart\patients\views.py changed, reloading.
Watching for file changes with StatReloader
D:\Fanshawe\capstone\recover_smart\patients\views.py changed, reloading.
Watching for file changes with StatReloader
D:\Fanshawe\capstone\recover_smart\patients\views.py changed, reloading.
Watching for file changes with StatReloader
"POST //api/patients/ HTTP/1.1" 201 158
D:\Fanshawe\capstone\recover_smart\users\services.py changed, reloading.
Watching for file changes with StatReloader
D:\Fanshawe\capstone\recover_smart\users\services.py changed, reloading.
Watching for file changes with StatReloader
"POST //api/patients/ HTTP/1.1" 201 159
D:\Fanshawe\capstone\recover_smart\users\services.py changed, reloading.
Watching for file changes with StatReloader
Internal Server Error: /api/patients/
Traceback (most recent call last):
  File "D:\Fanshawe\capstone\recover_smart\venv\Lib\site-packages\django\core\handlers\exception.py", line 55, in inner
    response = get_response(request)
  File "D:\Fanshawe\capstone\recover_smart\venv\Lib\site-packages\django\core\handlers\base.py", line 197, in _get_response
    response = wrapped_callback(request, *callback_args, **callback_kwargs)
  File "D:\Fanshawe\capstone\recover_smart\venv\Lib\site-packages\django\views\decorators\csrf.py", line 65, in _view_wrapper
    return view_func(request, *args, **kwargs)
  File "D:\Fanshawe\capstone\recover_smart\venv\Lib\site-packages\django\views\generic\base.py", line 104, in view
    return self.dispatch(request, *args, **kwargs)
           ~~~~~~~~~~~~~^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "D:\Fanshawe\capstone\recover_smart\venv\Lib\site-packages\rest_framework\views.py", line 509, in dispatch
    response = self.handle_exception(exc)
  File "D:\Fanshawe\capstone\recover_smart\venv\Lib\site-packages\rest_framework\views.py", line 469, in handle_exception
    self.raise_uncaught_exception(exc)
    ~~~~~~~~~~~~~~~~~~~~~~~~~~~~~^^^^^
  File "D:\Fanshawe\capstone\recover_smart\venv\Lib\site-packages\rest_framework\views.py", line 480, in raise_uncaught_exception
    raise exc
  File "D:\Fanshawe\capstone\recover_smart\venv\Lib\site-packages\rest_framework\views.py", line 506, in dispatch
    response = handler(request, *args, **kwargs)
  File "D:\Fanshawe\capstone\recover_smart\patients\views.py", line 87, in post
    return Response(user.errors, status=400)
                    ^^^^
UnboundLocalError: cannot access local variable 'user' where it is not associated with a value
"POST //api/patients/ HTTP/1.1" 500 108937
"POST //api/patients/ HTTP/1.1" 201 160
"POST //api/patients/ HTTP/1.1" 201 158
"POST //api/patients/ HTTP/1.1" 201 164
Watching for file changes with StatReloader
D:\Fanshawe\capstone\recover_smart\patients\urls.py changed, reloading.
Watching for file changes with StatReloader
D:\Fanshawe\capstone\recover_smart\patients\views.py changed, reloading.
Watching for file changes with StatReloader
D:\Fanshawe\capstone\recover_smart\patients\views.py changed, reloading.
Watching for file changes with StatReloader
D:\Fanshawe\capstone\recover_smart\patients\urls.py changed, reloading.
Watching for file changes with StatReloader
Internal Server Error: /api/auth/user/patient
Traceback (most recent call last):
  File "D:\Fanshawe\capstone\recover_smart\venv\Lib\site-packages\django\core\handlers\exception.py", line 55, in inner
    response = get_response(request)
  File "D:\Fanshawe\capstone\recover_smart\venv\Lib\site-packages\django\core\handlers\base.py", line 220, in _get_response
    response = response.render()
  File "D:\Fanshawe\capstone\recover_smart\venv\Lib\site-packages\django\template\response.py", line 114, in render
    self.content = self.rendered_content
                   ^^^^^^^^^^^^^^^^^^^^^
  File "D:\Fanshawe\capstone\recover_smart\venv\Lib\site-packages\rest_framework\response.py", line 59, in rendered_content
    assert renderer, ".accepted_renderer not set on Response"
           ^^^^^^^^
AssertionError: .accepted_renderer not set on Response
"GET /api/auth/user/patient HTTP/1.1" 500 83845
D:\Fanshawe\capstone\recover_smart\patients\views.py changed, reloading.
Watching for file changes with StatReloader
Internal Server Error: /api/auth/user/patient
Traceback (most recent call last):
  File "D:\Fanshawe\capstone\recover_smart\venv\Lib\site-packages\django\core\handlers\exception.py", line 55, in inner
    response = get_response(request)
  File "D:\Fanshawe\capstone\recover_smart\venv\Lib\site-packages\django\core\handlers\base.py", line 220, in _get_response
    response = response.render()
  File "D:\Fanshawe\capstone\recover_smart\venv\Lib\site-packages\django\template\response.py", line 114, in render
    self.content = self.rendered_content
                   ^^^^^^^^^^^^^^^^^^^^^
  File "D:\Fanshawe\capstone\recover_smart\venv\Lib\site-packages\rest_framework\response.py", line 59, in rendered_content
    assert renderer, ".accepted_renderer not set on Response"
           ^^^^^^^^
AssertionError: .accepted_renderer not set on Response
"GET /api/auth/user/patient HTTP/1.1" 500 83845
Internal Server Error: /api/auth/user/patient
Traceback (most recent call last):
  File "D:\Fanshawe\capstone\recover_smart\venv\Lib\site-packages\django\core\handlers\exception.py", line 55, in inner
    response = get_response(request)
  File "D:\Fanshawe\capstone\recover_smart\venv\Lib\site-packages\django\core\handlers\base.py", line 220, in _get_response
    response = response.render()
  File "D:\Fanshawe\capstone\recover_smart\venv\Lib\site-packages\django\template\response.py", line 114, in render
    self.content = self.rendered_content
                   ^^^^^^^^^^^^^^^^^^^^^
  File "D:\Fanshawe\capstone\recover_smart\venv\Lib\site-packages\rest_framework\response.py", line 59, in rendered_content
    assert renderer, ".accepted_renderer not set on Response"
           ^^^^^^^^
AssertionError: .accepted_renderer not set on Response
"GET /api/auth/user/patient HTTP/1.1" 500 83845
D:\Fanshawe\capstone\recover_smart\patients\views.py changed, reloading.
Watching for file changes with StatReloader
D:\Fanshawe\capstone\recover_smart\patients\views.py changed, reloading.
Watching for file changes with StatReloader
Internal Server Error: /api/auth/user/patient
Traceback (most recent call last):
  File "D:\Fanshawe\capstone\recover_smart\venv\Lib\site-packages\django\core\handlers\exception.py", line 55, in inner
    response = get_response(request)
  File "D:\Fanshawe\capstone\recover_smart\venv\Lib\site-packages\django\core\handlers\base.py", line 220, in _get_response
    response = response.render()
  File "D:\Fanshawe\capstone\recover_smart\venv\Lib\site-packages\django\template\response.py", line 114, in render
    self.content = self.rendered_content
                   ^^^^^^^^^^^^^^^^^^^^^
  File "D:\Fanshawe\capstone\recover_smart\venv\Lib\site-packages\rest_framework\response.py", line 59, in rendered_content
    assert renderer, ".accepted_renderer not set on Response"
           ^^^^^^^^
AssertionError: .accepted_renderer not set on Response
"GET /api/auth/user/patient HTTP/1.1" 500 83845
D:\Fanshawe\capstone\recover_smart\patients\views.py changed, reloading.
Watching for file changes with StatReloader
Internal Server Error: /api/auth/user/patient
Traceback (most recent call last):
  File "D:\Fanshawe\capstone\recover_smart\venv\Lib\site-packages\django\db\models\fields\__init__.py", line 2123, in get_prep_value
    return int(value)
TypeError: int() argument must be a string, a bytes-like object or a real number, not 'SimpleLazyObject'

The above exception was the direct cause of the following exception:

Traceback (most recent call last):
  File "D:\Fanshawe\capstone\recover_smart\venv\Lib\site-packages\django\core\handlers\exception.py", line 55, in inner
    response = get_response(request)
  File "D:\Fanshawe\capstone\recover_smart\venv\Lib\site-packages\django\core\handlers\base.py", line 197, in _get_response
    response = wrapped_callback(request, *callback_args, **callback_kwargs)
  File "D:\Fanshawe\capstone\recover_smart\patients\views.py", line 119, in userPatient
    patient = Patient.objects.prefetch_related("medical_records").get(user=user)
  File "D:\Fanshawe\capstone\recover_smart\venv\Lib\site-packages\django\db\models\query.py", line 635, in get
    clone = self._chain() if self.query.combinator else self.filter(*args, **kwargs)
                                                        ~~~~~~~~~~~^^^^^^^^^^^^^^^^^
  File "D:\Fanshawe\capstone\recover_smart\venv\Lib\site-packages\django\db\models\query.py", line 1476, in filter
    return self._filter_or_exclude(False, args, kwargs)
           ~~~~~~~~~~~~~~~~~~~~~~~^^^^^^^^^^^^^^^^^^^^^
  File "D:\Fanshawe\capstone\recover_smart\venv\Lib\site-packages\django\db\models\query.py", line 1494, in _filter_or_exclude
    clone._filter_or_exclude_inplace(negate, args, kwargs)
    ~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~^^^^^^^^^^^^^^^^^^^^^^
  File "D:\Fanshawe\capstone\recover_smart\venv\Lib\site-packages\django\db\models\query.py", line 1501, in _filter_or_exclude_inplace
    self._query.add_q(Q(*args, **kwargs))
    ~~~~~~~~~~~~~~~~~^^^^^^^^^^^^^^^^^^^^
  File "D:\Fanshawe\capstone\recover_smart\venv\Lib\site-packages\django\db\models\sql\query.py", line 1609, in add_q
    clause, _ = self._add_q(q_object, self.used_aliases)
                ~~~~~~~~~~~^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "D:\Fanshawe\capstone\recover_smart\venv\Lib\site-packages\django\db\models\sql\query.py", line 1641, in _add_q
    child_clause, needed_inner = self.build_filter(
                                 ~~~~~~~~~~~~~~~~~^
        child,
        ^^^^^^
    ...<7 lines>...
        update_join_types=update_join_types,
        ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
    )
    ^
  File "D:\Fanshawe\capstone\recover_smart\venv\Lib\site-packages\django\db\models\sql\query.py", line 1555, in build_filter
    condition = self.build_lookup(lookups, col, value)
  File "D:\Fanshawe\capstone\recover_smart\venv\Lib\site-packages\django\db\models\sql\query.py", line 1385, in build_lookup
    lookup = lookup_class(lhs, rhs)
  File "D:\Fanshawe\capstone\recover_smart\venv\Lib\site-packages\django\db\models\lookups.py", line 30, in __init__
    self.rhs = self.get_prep_lookup()
               ~~~~~~~~~~~~~~~~~~~~^^
  File "D:\Fanshawe\capstone\recover_smart\venv\Lib\site-packages\django\db\models\fields\related_lookups.py", line 156, in get_prep_lookup
    self.rhs = target_field.get_prep_value(self.rhs)
               ~~~~~~~~~~~~~~~~~~~~~~~~~~~^^^^^^^^^^
  File "D:\Fanshawe\capstone\recover_smart\venv\Lib\site-packages\django\db\models\fields\__init__.py", line 2125, in get_prep_value
    raise e.__class__(
        "Field '%s' expected a number but got %r." % (self.name, value),
    ) from e
TypeError: Field 'id' expected a number but got <SimpleLazyObject: <django.contrib.auth.models.AnonymousUser object at 0x0000012BDA86DD30>>.
"GET /api/auth/user/patient HTTP/1.1" 500 140244
D:\Fanshawe\capstone\recover_smart\patients\views.py changed, reloading.
Watching for file changes with StatReloader
D:\Fanshawe\capstone\recover_smart\patients\views.py changed, reloading.
Watching for file changes with StatReloader
Internal Server Error: /api/auth/user/patient
Traceback (most recent call last):
  File "D:\Fanshawe\capstone\recover_smart\venv\Lib\site-packages\django\core\handlers\exception.py", line 55, in inner
    response = get_response(request)
  File "D:\Fanshawe\capstone\recover_smart\venv\Lib\site-packages\django\core\handlers\base.py", line 220, in _get_response
    response = response.render()
  File "D:\Fanshawe\capstone\recover_smart\venv\Lib\site-packages\django\template\response.py", line 114, in render
    self.content = self.rendered_content
                   ^^^^^^^^^^^^^^^^^^^^^
  File "D:\Fanshawe\capstone\recover_smart\venv\Lib\site-packages\rest_framework\response.py", line 59, in rendered_content
    assert renderer, ".accepted_renderer not set on Response"
           ^^^^^^^^
AssertionError: .accepted_renderer not set on Response
"GET /api/auth/user/patient HTTP/1.1" 500 83845
D:\Fanshawe\capstone\recover_smart\patients\views.py changed, reloading.
Watching for file changes with StatReloader
D:\Fanshawe\capstone\recover_smart\patients\views.py changed, reloading.
Watching for file changes with StatReloader
Internal Server Error: /api/auth/user/patient
Traceback (most recent call last):
  File "D:\Fanshawe\capstone\recover_smart\venv\Lib\site-packages\django\core\handlers\exception.py", line 55, in inner
    response = get_response(request)
  File "D:\Fanshawe\capstone\recover_smart\venv\Lib\site-packages\django\core\handlers\base.py", line 220, in _get_response
    response = response.render()
  File "D:\Fanshawe\capstone\recover_smart\venv\Lib\site-packages\django\template\response.py", line 114, in render
    self.content = self.rendered_content
                   ^^^^^^^^^^^^^^^^^^^^^
  File "D:\Fanshawe\capstone\recover_smart\venv\Lib\site-packages\rest_framework\response.py", line 59, in rendered_content
    assert renderer, ".accepted_renderer not set on Response"
           ^^^^^^^^
AssertionError: .accepted_renderer not set on Response
"GET /api/auth/user/patient HTTP/1.1" 500 83845
D:\Fanshawe\capstone\recover_smart\patients\views.py changed, reloading.
Watching for file changes with StatReloader
Internal Server Error: /api/auth/user/patient
Traceback (most recent call last):
  File "D:\Fanshawe\capstone\recover_smart\venv\Lib\site-packages\django\core\handlers\exception.py", line 55, in inner
    response = get_response(request)
  File "D:\Fanshawe\capstone\recover_smart\venv\Lib\site-packages\django\core\handlers\base.py", line 220, in _get_response
    response = response.render()
  File "D:\Fanshawe\capstone\recover_smart\venv\Lib\site-packages\django\template\response.py", line 114, in render
    self.content = self.rendered_content
                   ^^^^^^^^^^^^^^^^^^^^^
  File "D:\Fanshawe\capstone\recover_smart\venv\Lib\site-packages\rest_framework\response.py", line 59, in rendered_content
    assert renderer, ".accepted_renderer not set on Response"
           ^^^^^^^^
AssertionError: .accepted_renderer not set on Response
"GET /api/auth/user/patient HTTP/1.1" 500 83845
D:\Fanshawe\capstone\recover_smart\patients\views.py changed, reloading.
Watching for file changes with StatReloader
D:\Fanshawe\capstone\recover_smart\patients\views.py changed, reloading.
Watching for file changes with StatReloader
D:\Fanshawe\capstone\recover_smart\patients\views.py changed, reloading.
Watching for file changes with StatReloader
D:\Fanshawe\capstone\recover_smart\patients\views.py changed, reloading.
Watching for file changes with StatReloader
D:\Fanshawe\capstone\recover_smart\patients\views.py changed, reloading.
Watching for file changes with StatReloader
Internal Server Error: /api/auth/user/patient
Traceback (most recent call last):
  File "D:\Fanshawe\capstone\recover_smart\venv\Lib\site-packages\django\core\handlers\exception.py", line 55, in inner
    response = get_response(request)
  File "D:\Fanshawe\capstone\recover_smart\venv\Lib\site-packages\django\core\handlers\base.py", line 220, in _get_response
    response = response.render()
  File "D:\Fanshawe\capstone\recover_smart\venv\Lib\site-packages\django\template\response.py", line 114, in render
    self.content = self.rendered_content
                   ^^^^^^^^^^^^^^^^^^^^^
  File "D:\Fanshawe\capstone\recover_smart\venv\Lib\site-packages\rest_framework\response.py", line 59, in rendered_content
    assert renderer, ".accepted_renderer not set on Response"
           ^^^^^^^^
AssertionError: .accepted_renderer not set on Response
"GET /api/auth/user/patient HTTP/1.1" 500 83845
Watching for file changes with StatReloader
"POST /api/auth/ HTTP/1.1" 200 483
"GET //api/patients/ HTTP/1.1" 200 283
"GET //api/checklists/ HTTP/1.1" 200 2
"GET //api/medical_record/2 HTTP/1.1" 200 2
Not Found: /api/home/
"POST /api/home/ HTTP/1.1" 404 6594
Internal Server Error: /api/users
Traceback (most recent call last):
  File "C:\Users\moham\AppData\Local\Programs\Python\Python313\Lib\smtplib.py", line 398, in getreply
    line = self.file.readline(_MAXLINE + 1)
  File "C:\Users\moham\AppData\Local\Programs\Python\Python313\Lib\socket.py", line 719, in readinto
    return self._sock.recv_into(b)
           ~~~~~~~~~~~~~~~~~~~~^^^
ConnectionAbortedError: [WinError 10053] An established connection was aborted by the software in your host machine

During handling of the above exception, another exception occurred:

Traceback (most recent call last):
  File "D:\Fanshawe\capstone\recover_smart\users\services.py", line 29, in create_user_and_send_email
    email.send()  # Send the email
    ~~~~~~~~~~^^
  File "D:\Fanshawe\capstone\recover_smart\venv\Lib\site-packages\django\core\mail\message.py", line 301, in send
    return self.get_connection(fail_silently).send_messages([self])
           ~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~^^^^^^^^
  File "D:\Fanshawe\capstone\recover_smart\venv\Lib\site-packages\django\core\mail\backends\smtp.py", line 128, in send_messages
    new_conn_created = self.open()
  File "D:\Fanshawe\capstone\recover_smart\venv\Lib\site-packages\django\core\mail\backends\smtp.py", line 86, in open
    self.connection = self.connection_class(
                      ~~~~~~~~~~~~~~~~~~~~~^
        self.host, self.port, **connection_params
        ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
    )
    ^
  File "C:\Users\moham\AppData\Local\Programs\Python\Python313\Lib\smtplib.py", line 255, in __init__
    (code, msg) = self.connect(host, port)
                  ~~~~~~~~~~~~^^^^^^^^^^^^
  File "C:\Users\moham\AppData\Local\Programs\Python\Python313\Lib\smtplib.py", line 343, in connect
    (code, msg) = self.getreply()
                  ~~~~~~~~~~~~~^^
  File "C:\Users\moham\AppData\Local\Programs\Python\Python313\Lib\smtplib.py", line 401, in getreply
    raise SMTPServerDisconnected("Connection unexpectedly closed: "
                                 + str(e))
smtplib.SMTPServerDisconnected: Connection unexpectedly closed: [WinError 10053] An established connection was aborted by the software in your host machine

During handling of the above exception, another exception occurred:

Traceback (most recent call last):
  File "D:\Fanshawe\capstone\recover_smart\venv\Lib\site-packages\django\core\handlers\exception.py", line 55, in inner
    response = get_response(request)
  File "D:\Fanshawe\capstone\recover_smart\venv\Lib\site-packages\django\core\handlers\base.py", line 197, in _get_response
    response = wrapped_callback(request, *callback_args, **callback_kwargs)
  File "D:\Fanshawe\capstone\recover_smart\venv\Lib\site-packages\django\views\decorators\csrf.py", line 65, in _view_wrapper
    return view_func(request, *args, **kwargs)
  File "D:\Fanshawe\capstone\recover_smart\venv\Lib\site-packages\django\views\generic\base.py", line 104, in view
    return self.dispatch(request, *args, **kwargs)
           ~~~~~~~~~~~~~^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "D:\Fanshawe\capstone\recover_smart\venv\Lib\site-packages\rest_framework\views.py", line 509, in dispatch
    response = self.handle_exception(exc)
  File "D:\Fanshawe\capstone\recover_smart\venv\Lib\site-packages\rest_framework\views.py", line 469, in handle_exception
    self.raise_uncaught_exception(exc)
    ~~~~~~~~~~~~~~~~~~~~~~~~~~~~~^^^^^
  File "D:\Fanshawe\capstone\recover_smart\venv\Lib\site-packages\rest_framework\views.py", line 480, in raise_uncaught_exception
    raise exc
  File "D:\Fanshawe\capstone\recover_smart\venv\Lib\site-packages\rest_framework\views.py", line 506, in dispatch
    response = handler(request, *args, **kwargs)
  File "D:\Fanshawe\capstone\recover_smart\users\views.py", line 87, in post
    create_user_and_send_email(user=user)
    ~~~~~~~~~~~~~~~~~~~~~~~~~~^^^^^^^^^^^
  File "D:\Fanshawe\capstone\recover_smart\users\services.py", line 33, in create_user_and_send_email
    raise ValueError(f"Error creating user: {str(e)}")
ValueError: Error creating user: Connection unexpectedly closed: [WinError 10053] An established connection was aborted by the software in your host machine
- Broken pipe from ('127.0.0.1', 52940)
Internal Server Error: /api/auth/user/patient
Traceback (most recent call last):
  File "D:\Fanshawe\capstone\recover_smart\venv\Lib\site-packages\django\core\handlers\exception.py", line 55, in inner
    response = get_response(request)
  File "D:\Fanshawe\capstone\recover_smart\venv\Lib\site-packages\django\core\handlers\base.py", line 220, in _get_response
    response = response.render()
  File "D:\Fanshawe\capstone\recover_smart\venv\Lib\site-packages\django\template\response.py", line 114, in render
    self.content = self.rendered_content
                   ^^^^^^^^^^^^^^^^^^^^^
  File "D:\Fanshawe\capstone\recover_smart\venv\Lib\site-packages\rest_framework\response.py", line 59, in rendered_content
    assert renderer, ".accepted_renderer not set on Response"
           ^^^^^^^^
AssertionError: .accepted_renderer not set on Response
"GET /api/auth/user/patient HTTP/1.1" 500 83845
D:\Fanshawe\capstone\recover_smart\patients\views.py changed, reloading.
Watching for file changes with StatReloader
D:\Fanshawe\capstone\recover_smart\patients\views.py changed, reloading.
Watching for file changes with StatReloader
Unauthorized: /api/auth/user/patient
"GET /api/auth/user/patient HTTP/1.1" 401 58
"POST /api/auth/ HTTP/1.1" 200 483
Unauthorized: /api/auth/user/patient
"GET /api/auth/user/patient HTTP/1.1" 401 58
Not Found: /api/auth/user/patient
"GET /api/auth/user/patient HTTP/1.1" 404 29
